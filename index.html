<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>åå¤å±‹ãƒ»å†¬ä¹‹æ—…</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Yomogi&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        /* è‡ªå®šç¾©æ¨£å¼è¨­å®š */
        :root {
            --bg-paper: #f9f7f2;
            --primary: #769a9e; /* è«è˜­è¿ªç¶  */
            --secondary: #e6a496; /* çŠç‘šç²‰ */
            --accent: #dca856; /* èŠ¥æœ«é»ƒ */
            --text-main: #4a4a4a;
            --text-light: #7a7a7a;
        }

        body {
            /* å…¨åŸŸå­—é«”æ”¹ç‚ºæ€æºé»‘é«”/å°åŒ—é»‘é«”é¢¨æ ¼ */
            font-family: 'Noto Sans TC', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: var(--bg-paper);
            color: var(--text-main);
            /* æ¨¡æ“¬ç´™å¼µç´‹ç† */
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100' height='100' filter='url(%23noise)' opacity='0.05'/%3E%3C/svg%3E");
            -webkit-font-smoothing: antialiased;
        }

        h1, h2, .handwriting {
            font-family: 'Yomogi', cursive;
        }

        /* éš±è—æ²è»¸ä½†ä¿ç•™åŠŸèƒ½ */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* æ°´å½©é¢¨æ ¼å¡ç‰‡ (ä¸è¦å‰‡é‚Šæ¡†) */
        .watercolor-card {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(4px);
            border-radius: 255px 15px 225px 15px / 15px 225px 15px 255px;
            box-shadow: 2px 4px 12px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(0,0,0,0.02);
            transition: transform 0.2s ease;
        }
        
        .watercolor-card:active {
            transform: scale(0.98);
        }

        /* æ°´å½©æŒ‰éˆ• */
        .btn-water {
            border-radius: 25px 255px 25px 255px / 255px 25px 255px 25px;
            transition: all 0.3s ease;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.1);
        }

        /* æ™‚é–“è»¸ç·šæ¢ */
        .timeline-line::before {
            content: '';
            position: absolute;
            top: 0;
            bottom: 0;
            left: 14px;
            width: 2px;
            background: #e0e0e0;
            border-radius: 2px;
            z-index: 0;
        }

        /* åº•éƒ¨å°èˆªé¸ä¸­æ…‹ */
        .nav-item.active {
            color: var(--primary);
            font-weight: bold;
        }
        .nav-item.active i {
            background-color: rgba(118, 154, 158, 0.2);
            border-radius: 50%;
            padding: 8px;
            transform: scale(1.1);
        }

        /* å‹¾é¸æ¡†æ¨£å¼ */
        .custom-checkbox:checked + label {
            text-decoration: line-through;
            color: #aaa;
            opacity: 0.7;
        }
        
        /* é é¢åˆ‡æ›å‹•ç•« */
        .tab-content {
            display: none;
            animation: fadeIn 0.4s ease-out;
        }
        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .memo-link {
            display: inline-block;
            margin: 4px;
            padding: 4px 12px;
            background-color: var(--secondary);
            color: white;
            border-radius: 20px;
            font-size: 0.85rem;
            text-decoration: none;
        }
    </style>
</head>
<body class="pb-24">

    <header class="sticky top-0 z-50 bg-[#f9f7f2]/95 backdrop-blur-md px-4 py-3 shadow-sm border-b border-gray-200/50">
        <div class="flex justify-between items-center">
            <div>
                <h1 class="text-2xl font-bold text-[#5e8b7e]">Nagoya Trip â„ï¸</h1>
                <p class="text-xs text-gray-500 font-sans tracking-wide">2026.02.09 - 02.13</p>
            </div>
            <div class="text-right text-xs text-gray-600 bg-white/60 p-2 rounded-lg border border-gray-100 font-mono">
                <div>ğŸ›« CI154 07:35</div>
                <div>ğŸ›¬ CI155 12:05</div>
            </div>
        </div>
    </header>

    <section id="plan" class="tab-content active px-4 pt-4">
        <div class="flex overflow-x-auto no-scrollbar gap-3 mb-6 pb-2" id="date-scroll"></div>
        <div id="itinerary-container" class="space-y-6 relative timeline-line"></div>
    </section>

    <section id="guide" class="tab-content px-4 pt-4 space-y-6">
        <div class="text-center mb-4">
            <h2 class="text-2xl handwriting text-[#769a9e]">Travel Guide</h2>
            <p class="text-sm text-gray-500">åŸå¸‚çš„è¨˜æ†¶èˆ‡æ•…äº‹</p>
        </div>
        <div id="guide-container" class="space-y-8"></div>
    </section>

    <section id="lists" class="tab-content px-4 pt-4">
        <div class="mb-8">
            <h2 class="text-xl handwriting mb-3 text-[#e6a496]"><i class="fas fa-suitcase-rolling mr-2"></i>Packing List</h2>
            <div class="bg-white p-5 rounded-[20px] shadow-sm relative overflow-hidden">
                <div class="absolute top-0 left-0 w-full h-1 bg-[#e6a496]"></div>
                <div id="checklist-container" class="space-y-3"></div>
            </div>
        </div>
        <div class="mb-20">
            <h2 class="text-xl handwriting mb-3 text-[#dca856]"><i class="fas fa-pen-nib mr-2"></i>Memo</h2>
            <div class="bg-white p-4 rounded-[20px] shadow-sm border border-gray-100">
                <textarea id="user-memo" class="w-full h-40 p-3 text-gray-700 bg-[#fdfbf7] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#dca856]/50 resize-none text-sm" placeholder="éš¨æ‰‹è¨˜ä¸‹æƒ³å»çš„åº—ã€è³¼ç‰©æ¸…å–®..."></textarea>
                <div id="memo-links-area" class="mt-3 flex flex-wrap gap-2"></div>
            </div>
        </div>
    </section>

    <section id="info" class="tab-content px-4 pt-4">
        <div class="grid grid-cols-2 gap-4 mb-6">
            <a href="https://www.jma.go.jp/bosai/forecast/" target="_blank" class="watercolor-card p-4 flex flex-col items-center justify-center gap-2 text-center text-[#5e8b7e]">
                <i class="fas fa-cloud-sun text-3xl"></i>
                <span class="font-bold">å¤©æ°£é å ±</span>
                <span class="text-xs text-gray-400">æ—¥æœ¬æ°£è±¡å»³</span>
            </a>
            <a href="https://vjw-lp.digital.go.jp/en/" target="_blank" class="watercolor-card p-4 flex flex-col items-center justify-center gap-2 text-center text-[#e6a496]">
                <i class="fas fa-qrcode text-3xl"></i>
                <span class="font-bold">Visit Japan Web</span>
                <span class="text-xs text-gray-400">å…¥å¢ƒç™»éŒ„</span>
            </a>
        </div>
        </section>

    <nav class="fixed bottom-0 left-0 w-full bg-white/90 backdrop-filter backdrop-blur-lg border-t border-gray-200 pb-safe pt-2 px-6 flex justify-between items-center z-50 h-[80px] rounded-t-[20px] shadow-[0_-5px_15px_rgba(0,0,0,0.05)]">
        <button onclick="switchTab('plan')" class="nav-item active flex flex-col items-center gap-1 text-gray-400 transition-colors w-16" id="nav-plan">
            <i class="fas fa-calendar-alt text-lg"></i>
            <span class="text-[10px]">è¡Œç¨‹</span>
        </button>
        <button onclick="switchTab('guide')" class="nav-item flex flex-col items-center gap-1 text-gray-400 transition-colors w-16" id="nav-guide">
            <i class="fas fa-book-open text-lg"></i>
            <span class="text-[10px]">å°è¦½</span>
        </button>
        <button onclick="switchTab('lists')" class="nav-item flex flex-col items-center gap-1 text-gray-400 transition-colors w-16" id="nav-lists">
            <i class="fas fa-list-check text-lg"></i>
            <span class="text-[10px]">æ¸…å–®</span>
        </button>
        <button onclick="switchTab('info')" class="nav-item flex flex-col items-center gap-1 text-gray-400 transition-colors w-16" id="nav-info">
            <i class="fas fa-info-circle text-lg"></i>
            <span class="text-[10px]">è³‡è¨Š</span>
        </button>
    </nav>

    <script>
        // è³‡æ–™å€èˆ‡é‚è¼¯å€ä¿æŒä¸è®Šï¼Œç•¥...
        const itineraryData = [
            {
                date: "2/9",
                day: "é€±ä¸€",
                hotel: "ç‰§é‡æ±å…¬åœ’æ—ä½å®¿",
                events: [
                    { time: "05:00", end: "05:30", title: "å‰å¾€æ¡ƒåœ’æ©Ÿå ´", icon: "fa-car", important: true },
                    { time: "07:35", end: "11:05", title: "TPE âœˆï¸ NGO (CI154)", icon: "fa-plane", desc: "æŠµé”ä¸­éƒ¨åœ‹éš›æ©Ÿå ´ T1" },
                    { time: "12:00", end: "12:20", title: "ç§»å‹•ï¼šæ©Ÿå ´ â†’ å¸¸æ»‘", icon: "fa-train" },
                    { time: "12:20", end: "14:00", title: "å¸¸æ»‘æ•£ç­–", icon: "fa-cat", desc: "å¸¸æ»‘è€è¡—ã€æ‹›è²¡è²“é“ã€åƒåœ°ç“œ", location: "å¸¸æ»‘è€è¡—" },
                    { time: "14:40", end: "15:10", title: "ç§»å‹•ï¼šåå¤å±‹ç«™ â†’ ä½å®¿", icon: "fa-suitcase" },
                    { time: "15:40", end: "17:30", title: "ç†±ç”°ç¥å®®", icon: "fa-torii-gate", desc: "åƒæ‹œã€æ•£æ­¥ã€å•†åº—è¡—å°åƒ", location: "ç†±ç”°ç¥å®®" },
                    { time: "18:00", end: "21:30", title: "è“¬èŠè»’ é°»é­šé£¯", icon: "fa-utensils", desc: "æ¾é˜ªå±‹åº—ï¼Œæ’éšŠï¼‹ç”¨é¤ï¼Œç©ºæª”é€› PARCO", location: "è“¬èŠè»’ æ¾å‚å±‹åº—" },
                    { time: "21:30", end: "22:00", title: "è¿”å›ä½å®¿", icon: "fa-bed" }
                ]
            },
            {
                date: "2/10",
                day: "é€±äºŒ",
                hotel: "ç‰§é‡æ±å…¬åœ’æ—ä½å®¿",
                events: [
                    { time: "07:10", end: "07:30", title: "å‰å¾€æ—©é¤åº—/ç¡è¦º", icon: "fa-walking" },
                    { time: "08:00", end: "08:45", title: "Tsubame Bread & Milk", icon: "fa-bread-slice", desc: "åå¤å±‹æ—©é¤åº—", location: "Tsubame Bread & Milk" },
                    { time: "09:45", end: "12:30", title: "11PhotoStudio å’Œæœæ›è£", icon: "fa-user-tie", desc: "æ›è£å¾Œå‰å¾€çŠ¬å±±åŸæ‹ç…§", location: "11PhotoStudio åå¤å±‹" },
                    { time: "12:30", end: "16:00", title: "çŠ¬å±±åŸ ï¼† åŸä¸‹ç”º", icon: "fa-chess-rook", desc: "ä¸‰å…‰ç¨»è·ç¥ç¤¾æ´—éŒ¢ (æº–å‚™å°/æ¾³å¹£)", location: "çŠ¬å±±åŸ" },
                    { time: "17:30", end: "18:00", title: "æ­¸é‚„å’Œæœ â†’ æ¦®", icon: "fa-subway" },
                    { time: "18:30", end: "19:30", title: "æ¦®å•†åœˆæ™šé¤", icon: "fa-utensils", location: "æ¦®å•†åœˆ" },
                    { time: "19:30", end: "20:30", title: "ä¸­éƒ¨é›»åŠ›å¡”/ç¶ æ´²21 å¤œæ™¯", icon: "fa-tower-observation", desc: "ä¹…å±‹å¤§é€šæ•£æ­¥", location: "ä¸­éƒ¨é›»åŠ› MIRAI TOWER" }
                    { time: "21:30", end: "22:00", title: "è¿”å›ä½å®¿", icon: "fa-bed", desc: "è¨˜å¾—è²·æ˜å¤©çš„æ—©é¤" }
                ]
            },
            {
                date: "2/11",
                day: "é€±ä¸‰",
                hotel: "ç‰§é‡æ±å…¬åœ’æ—ä½å®¿",
                events: [
                    { time: "08:00", end: "10:10", title: "ç§»å‹•ï¼šå‰å¾€ç™½å·é„‰", icon: "fa-bus", important: true },
                    { time: "10:10", end: "11:50", title: "ç™½å·é„‰åˆæŒæ‘", icon: "fa-snowflake", desc: "11:40 æº–å‚™å›åœè»Šå ´", location: "ç™½å·é„‰åˆæŒæ‘" },
                    { time: "13:00", end: "13:40", title: "åˆé¤ï¼šå‘³ä¹‹ä¸å¹³", icon: "fa-utensils", desc: "ä¸ç”¨åƒå¤ªé£½ï¼Œç•™èƒƒé€›è€è¡—", location: "å‘³ä¹‹ä¸å¹³" },
                    { time: "13:50", end: "15:40", title: "é£›é©’é«˜å±±è€è¡—", icon: "fa-store", location: "é£›é©’é«˜å±±è€è¡—" },
                    { time: "18:00", end: "18:20", title: "è¿”å›åå¤å±‹å¸‚å€", icon: "fa-bus" },
                    { time: "18:30", end: "20:00", title: "æ™šé¤", icon: "fa-utensils", desc: "æµ·è€ã©ã¦é£Ÿå ‚ (åå¤å±‹åœ°ä¸‹è¡— å¦‚æœä¸æƒ³åƒå¯ä»¥é¸åˆ¥çš„)", location: "æµ·è€ã©ã¦é£Ÿå ‚ ã‚¨ã‚¹ã‚«åº—" }
                    { time: "20:00", end: "20:30", title: "è¿”å›ä½å®¿", icon: "fa-bed", desc: "æœ‰åŠ›æ°£çš„è©±å¯ä»¥å»æ°¸æ—ºé€›é€›" }
                ]
            },
            {
                date: "2/12",
                day: "é€±å››",
                hotel: "JR Gate Tower Hotel",
                events: [
                    { time: "08:30", end: "09:00", title: "Airbnb é€€æˆ¿", icon: "fa-door-open" },
                    { time: "09:00", end: "09:20", title: "é£¯åº—å¯„æ”¾è¡Œæ", icon: "fa-luggage-cart", location: "Nagoya JR Gate Tower Hotel" },
                    { time: "09:45", end: "11:15", title: "åå¤å±‹åŸ", icon: "fa-archway", desc: "åƒè§€æœ¬ä¸¸å¾¡æ®¿", location: "åå¤å±‹åŸ" },
                    { time: "11:45", end: "12:45", title: "Gate Tower/é«˜å³¶å±‹ åˆé¤", icon: "fa-utensils" },
                    { time: "13:00", end: "15:00", title: "Gate Tower Mall é€›è¡—", icon: "fa-shopping-bag" },
                    { time: "15:00", end: "16:00", title: "Check In ä¼‘æ¯", icon: "fa-bed", important: true },
                    { time: "17:30", end: "20:00", title: "åå¤å±‹ç«™å‘¨é‚Šæ™šé¤/é€›è¡—ã€ä¼´æ‰‹ç¦®", icon: "fa-utensils" }
                ]
            },
            {
                date: "2/13",
                day: "é€±äº”",
                hotel: "Home Sweet Home",
                events: [
                    { time: "08:00", end: "09:00", title: "åéµ Î¼-SKY â†’ æ©Ÿå ´", icon: "fa-train", important: true },
                    { time: "09:00", end: "12:05", title: "å ±åˆ°ã€å‡ºå¢ƒã€å…ç¨…åº—", icon: "fa-passport" },
                    { time: "12:05", end: "14:40", title: "NGO âœˆï¸ TPE (CI155)", icon: "fa-plane-departure" }
                ]
            }
        ];

        const guideData = [
            {
                title: "ç™½å·é„‰åˆæŒæ‘",
                img: "https://d1grca2t3zpuug.cloudfront.net/2024/09/66e26c5a140b9-870x500.webp",
                desc: "ä¸–ç•Œæ–‡åŒ–éºç”¢ã€‚ç‰¹è‰²çš„ã€ŒåˆæŒé€ ã€å»ºç¯‰æ˜¯ç‚ºäº†æ‡‰å°è±ªé›ªåœ°å¸¶è€Œç”Ÿï¼Œå±‹é ‚å‘ˆç¾60åº¦æ–œè§’ï¼Œå½¢ç‹€åƒé›™æ‰‹åˆåï¼Œæ•…ååˆæŒæ‘ã€‚é€™è£¡å®›å¦‚ç«¥è©±ä¸–ç•Œï¼Œè¨˜å¾—å˜—è©¦é€™è£¡çš„äº”å¹³é¤…èˆ‡é£›é©’ç‰›ä¸²ç‡’ã€‚",
                location: "Shirakawa-go",
                hasMap: true
            },
            {
                title: "ç†±ç”°ç¥å®®",
                img: "https://static.gltjp.com/glt/data/article/21000/20401/20241119_023936_de5ef996_w1920.webp",
                desc: "æ—¥æœ¬ä¸‰å¤§ç¥å®®ä¹‹ä¸€ï¼Œä¾›å¥‰è‘—æ—¥æœ¬ä¸‰å¤§ç¥å™¨ä¹‹ä¸€çš„ã€Œè‰è–™åŠã€ã€‚ç¥å®®å…§å¤æ¨¹åƒå¤©ï¼Œæœ‰è‘—åçš„ã€Œä¿¡é•·ç‰†ã€ã€‚ä¾†åˆ°é€™è£¡å¿…åƒå®®ãã—ã‚ã‚“ï¼ˆå®®å¯¬éºµï¼‰æˆ–é™„è¿‘çš„è“¬èŠè»’é°»é­šé£¯ã€‚",
                location: "Atsuta Shrine",
                hasMap: false
            },
            {
                title: "çŠ¬å±±åŸ",
                img: "https://d1grca2t3zpuug.cloudfront.net/2025/12/2025inuyamajo16-870x500-1765244239.webp",
                desc: "æ—¥æœ¬ç¾å­˜æœ€å¤è€çš„å¤©å®ˆé–£ä¹‹ä¸€ï¼Œæ˜¯åœ‹å¯¶äº”åŸä¹‹ä¸€ã€‚ä½æ–¼æœ¨æ¨å·æ—çš„å°å±±ä¸˜ä¸Šï¼Œè¦–é‡æ¥µä½³ã€‚å±±ä¸‹çš„ä¸‰å…‰ç¨»è·ç¥ç¤¾æœ‰ç²‰ç´…è‰²çš„æ„›å¿ƒç¹ªé¦¬ï¼Œé‚„æœ‰å¯ä»¥ã€Œæ´—éŒ¢ã€çš„ç¥æ°´ï¼Œæ“šèªªæ´—éçš„éŒ¢æœƒå€å¢å›ä¾†ï¼",
                location: "Inuyama Castle",
                hasMap: false
            },
            {
                title: "åå¤å±‹åŸ",
                img: "https://res.klook.com/images/w_1200,h_630,c_fill,q_65/w_80,x_15,y_15,g_south_west,l_Klook_water_br_trans_yhcmh3/activities/mv6lrp0mrcl0chali7mm/%E5%90%8D%E5%8F%A4%E5%B1%8B%E5%9F%8E%20(Nagoya%20Castle)%E9%96%80%E7%A5%A8.jpg",
                desc: "å¾·å·å®¶åº·ä¸‹ä»¤å»ºé€ çš„å¹³åœ°åŸå ¡ï¼Œå±‹é ‚ä¸Šçš„é‡‘é¯±æ˜¯åå¤å±‹çš„è±¡å¾µã€‚å¿…çœ‹çš„æ˜¯ä¿®å¾©å¾Œçš„ã€Œæœ¬ä¸¸å¾¡æ®¿ã€ï¼Œå…§éƒ¨é‡‘ç¢§è¼ç…Œçš„éšœå£ç•«æ¥µç‚ºéœ‡æ’¼ï¼Œå±•ç¾äº†æ±Ÿæˆ¶æ™‚ä»£æ­¦å®¶æ–‡åŒ–çš„å¥¢è¯ã€‚",
                location: "Nagoya Castle",
                hasMap: true
            }
        ];

        const defaultPackingList = [
            "è­·ç…§ (æœ‰æ•ˆæœŸ6å€‹æœˆä»¥ä¸Š)", "eSIM / æ¼«éŠé–‹é€š", "æ—¥å¹£ (ç¾é‡‘)", "Visit Japan Webæˆªåœ–", 
            "è¡Œå‹•é›»æº & å……é›»ç·š", "å¸¸å‚™è—¥å“ (èƒƒè—¥/æ­¢ç—›)", "ç‰™åˆ·ç‰™è†", "ä¿¡ç”¨å¡ (æµ·å¤–å›é¥‹é«˜)", 
            "ä¿æš–è¡£ç‰©", "èˆ’é©å¥½èµ°çš„é‹", "æš–æš–åŒ…", "å£ç½©"
        ];

        // --- é‚è¼¯å€ ---
        document.addEventListener('DOMContentLoaded', () => {
            renderDateSelector();
            renderItinerary(0);
            renderGuide();
            renderChecklist();
            initMemo();
        });

        function switchTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            document.getElementById('nav-' + tabId).classList.add('active');
            window.scrollTo(0,0);
        }

        function renderDateSelector() {
            const container = document.getElementById('date-scroll');
            container.innerHTML = itineraryData.map((day, index) => `
                <button onclick="renderItinerary(${index})" id="date-btn-${index}" 
                    class="date-btn flex-shrink-0 px-4 py-2 rounded-2xl border border-gray-100 shadow-sm bg-white min-w-[70px] text-center transition-all ${index === 0 ? 'bg-[#5e8b7e] text-white ring-2 ring-[#5e8b7e]/50' : 'text-gray-500'}">
                    <div class="text-xs font-bold mb-1">${day.date}</div>
                    <div class="text-[10px] opacity-80">${day.day}</div>
                </button>
            `).join('');
        }

        function renderItinerary(index) {
            document.querySelectorAll('.date-btn').forEach(btn => {
                btn.classList.remove('bg-[#5e8b7e]', 'text-white', 'ring-2');
                btn.classList.add('text-gray-500', 'bg-white');
            });
            const activeBtn = document.getElementById(`date-btn-${index}`);
            activeBtn.classList.remove('text-gray-500', 'bg-white');
            activeBtn.classList.add('bg-[#5e8b7e]', 'text-white', 'ring-2', 'ring-[#5e8b7e]/50');

            const dayData = itineraryData[index];
            const container = document.getElementById('itinerary-container');
            let html = `<div class="pl-8 mb-6"><div class="inline-block bg-[#e08e79]/10 text-[#e08e79] px-3 py-1 rounded-full text-xs font-bold border border-[#e08e79]/20"><i class="fas fa-bed mr-1"></i> ${dayData.hotel}</div></div>`;

            html += dayData.events.map(event => {
                const isImportant = event.important ? 'border-l-4 border-[#dca856] bg-[#fffcf5]' : 'border-l-4 border-transparent bg-white';
                const timeColor = event.important ? 'text-[#dca856]' : 'text-[#769a9e]';
                const mapBtn = event.location ? `<a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(event.location)}" target="_blank" class="mt-2 inline-flex items-center text-xs text-white bg-[#5e8b7e] px-3 py-1.5 rounded-full hover:bg-[#4a7266] transition-colors shadow-sm"><i class="fas fa-map-marker-alt mr-1.5"></i> å°èˆª</a>` : '';
                return `<div class="relative pl-8 pb-1 group"><div class="absolute left-0 top-1 w-8 flex flex-col items-center z-10"><div class="w-3 h-3 rounded-full bg-white border-2 border-[#5e8b7e] group-hover:scale-125 transition-transform"></div></div><div class="watercolor-card p-4 mb-4 ${isImportant}"><div class="flex justify-between items-start mb-1"><span class="font-mono text-sm font-bold ${timeColor}">${event.time} - ${event.end}</span><i class="fas ${event.icon} text-gray-300 text-sm"></i></div><h3 class="text-lg font-bold text-gray-800 mb-1 leading-tight">${event.title}</h3>${event.desc ? `<p class="text-sm text-gray-500 mb-2 leading-relaxed">${event.desc}</p>` : ''}${mapBtn}</div></div>`;
            }).join('');
            container.innerHTML = html;
        }

        function renderGuide() {
            const container = document.getElementById('guide-container');
            container.innerHTML = guideData.map((spot) => `
                <div class="watercolor-card overflow-hidden bg-white">
                    <div class="h-48 overflow-hidden relative"><img src="${spot.img}" alt="${spot.title}" class="w-full h-full object-cover"><div class="absolute bottom-0 left-0 w-full bg-gradient-to-t from-black/60 to-transparent p-4 pt-12"><h3 class="text-white text-xl font-bold tracking-widest">${spot.title}</h3></div></div>
                    <div class="p-5"><p class="text-gray-600 text-sm leading-7 text-justify font-light"><span class="text-4xl float-left mr-2 mt-[-10px] handwriting text-[#e08e79]">${spot.desc.charAt(0)}</span>${spot.desc.slice(1)}</p></div>
                </div>
            `).join('');
        }

        function renderChecklist() {
            const container = document.getElementById('checklist-container');
            const savedState = JSON.parse(localStorage.getItem('trip_checklist_state')) || {};
            container.innerHTML = defaultPackingList.map((item, index) => {
                const isChecked = savedState[item] ? 'checked' : '';
                return `<div class="flex items-center gap-3 p-2 border-b border-gray-50 last:border-0 hover:bg-gray-50 rounded-lg transition-colors"><input type="checkbox" id="check-${index}" class="custom-checkbox w-5 h-5 accent-[#e6a496] rounded cursor-pointer" ${isChecked} onchange="toggleCheck('${item}')"><label for="check-${index}" class="flex-1 cursor-pointer select-none text-gray-700 text-sm">${item}</label></div>`;
            }).join('');
        }

        function toggleCheck(item) {
            const savedState = JSON.parse(localStorage.getItem('trip_checklist_state')) || {};
            if (savedState[item]) { delete savedState[item]; } else { savedState[item] = true; }
            localStorage.setItem('trip_checklist_state', JSON.stringify(savedState));
        }

        function initMemo() {
            const memoArea = document.getElementById('user-memo');
            memoArea.value = localStorage.getItem('trip_memo') || '';
            memoArea.addEventListener('input', (e) => { localStorage.setItem('trip_memo', e.target.value); });
        }
    </script>
</body>
</html>
